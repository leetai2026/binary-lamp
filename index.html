<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Binary Sigil</title>

<style>
body{
  text-align:center;
  font-family:sans-serif;
  background:#f4f4f4;
  padding:40px;
}

h1{
  font-size:48px;
  margin-bottom:8px;
}

.lang{
  cursor:pointer;
  font-weight:bold;
}

#desc{
  margin:12px auto 24px;
  color:#333;
  font-size:16px;
  line-height:1.6;
  max-width:640px;
}

input{
  padding:10px;
  font-size:20px;
  width:200px;
  text-align:center;
}

button{
  padding:10px 20px;
  font-size:18px;
  background:black;
  color:white;
  border:none;
  cursor:pointer;
}

.hint{
  margin-top:8px;
  font-size:14px;
  color:#555;
}

.grid{
  margin:30px auto 40px;
  width:240px;
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:20px;
}

/* 電球 */
.bulb{
  width:40px;
  height:40px;
  border-radius:50%;
  background:#ddd;
  margin:auto;
  transition:0.3s;
}

.bulb.on{
  background:gold;
  box-shadow:0 0 20px gold;
}

#result{
  margin-top:10px;
  font-size:18px;
  max-width:500px;
  margin-left:auto;
  margin-right:auto;
}
</style>
</head>

<body>

<h1 id="title">Binary Sigil</h1>

<!-- トップページで常時表示する説明 -->
<p id="desc">
  Build your sigil from binary light You are invited to explore your inner pattern
</p>

<div>
  <span class="lang" onclick="setLang('en')">EN</span> |
  <span class="lang" onclick="setLang('jp')">JP</span>
</div>

<br>

<!-- 入力とボタン -->
<div>
  <input type="number" id="numberInput" placeholder="Enter number">
  <button id="lightBtn" onclick="activate()">Light</button>
  <!-- 入力欄直下にヒント（4桁の数字をいれてね） -->
  <div id="hint" class="hint">Enter any 4 digit number</div>
</div>

<div class="grid" id="grid"></div>

<div id="result"></div>

<script>
// ▼ デフォルト言語: en
let currentLang = "en";

/* 電球生成 */
const grid = document.getElementById("grid");
for (let i = 0; i < 16; i++) {
  const div = document.createElement("div");
  div.className = "bulb";
  grid.appendChild(div);
}

/* 言語切替 */
function setLang(lang){
  currentLang = lang;

  // タイトル
  document.getElementById("title").textContent =
    lang === "jp" ? "バイナリー・シジル" : "Binary Sigil";

  // トップ説明（常時表示）
  document.getElementById("desc").textContent =
    lang === "jp"
      ? "バイナリの光からシジルを紡ぐ あなたの内なるパターンをたどる"
      : "Build your sigil from binary light You are invited to explore your inner pattern";

  // プレースホルダー・ボタン
  const input = document.getElementById("numberInput");
  input.placeholder = lang === "jp" ? "数字を入力" : "Enter number";
  document.getElementById("lightBtn").textContent = lang === "jp" ? "点灯" : "Light";

  // 入力欄のヒント（4桁）
  document.getElementById("hint").textContent =
    lang === "jp" ? "好きな4桁の数字をいれてね" : "Enter any 4 digit number";

  activate(); // 再描画
}

/* シジル文章生成（句読点なし・冒頭に You are / あなたは） */
function generateMessage(num){
  const enTraits = [
    ["Inner","Outer"],
    ["Creative","Logical"],
    ["Calm","Dynamic"],
    ["Light-bound","Shadow-born"]
  ];

  const jpTraits = [
    ["内なる","外向の"],
    ["創造的な","論理的な"],
    ["静かな","躍動する"],
    ["光に導かれた","影を宿す"]
  ];

  const traits = currentLang === "jp" ? jpTraits : enTraits;

  // 上位4ビットで性質を選ぶ
  const bin4 = num.toString(2).padStart(4,"0");
  const words = [];
  for (let i = 0; i < 4; i++) {
    words.push(bin4[i] === "1" ? traits[i][1] : traits[i][0]);
  }

  if (currentLang === "jp") {
    return "あなたは " + words.join(" ") + " 存在 内なる力が形を成す";
  } else {
    return "You are " + words.join(" ") + " being Power crystallizes from within";
  }
}

/* 実行 */
function activate(){
  const input = document.getElementById("numberInput");
  const num = parseInt(input.value);

  if (isNaN(num)) return;

  // 16ビットで電球表示
  const bin16 = num.toString(2).padStart(16,"0");
  const bulbs = document.querySelectorAll(".bulb");

  bulbs.forEach((b,i) => {
    if (bin16[i] === "1") {
      b.classList.add("on");
    } else {
      b.classList.remove("on");
    }
  });

  document.getElementById("result").textContent = generateMessage(num);
}

// 初期表示（デフォルト: en）
setLang(currentLang);
</script>

</body>
</html>
